<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="styles.css">
        <link rel="stylesheet" type="text/css" href="rewards.css">
        <link rel="icon" href="media/newlogo_transparent.png">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
        <script src="https://betterdiscord.app/js/vendor/countUp.min.js?v=DBxeQBHNMaYkRvB8uPOLm07cbQj54TDexlykb-Dcg28"></script>
        <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
        <link href='https://cdn.boxicons.com/fonts/animations.min.css' rel='stylesheet'>
        <link rel="stylesheet" href="https://github.hubspot.com/odometer/themes/odometer-theme-default.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
        <script src="js/app-core.js"></script>
        <script src="js/raid-notifications.js"></script>
        <script src="js/system-heartbeat.js"></script>
        <script src="js/ui-live-data-flow.js"></script>
        <script src="js/api-monitor.js"></script>
        <script src="js/user-raid-history.js"></script>
        <script src="js/system-achievements.js"></script>
        <script src="js/user-settings.js"></script>
        <script src="js/user-search.js"></script>
        <script src="js/user-profiles.js"></script>
        <script src="js/user-friends.js"></script>
        <script src="js/user-share.js"></script>
        <script src="js/battlepass-calculator.js"></script>
        <script src="js/battlepass-rewards.js"></script>
        <script src="js/ui-navigation.js"></script>
        <script src="js/ui-toasts.js"></script>
        <script src="js/app-utils.js"></script>
        <script src="js/app-init.js"></script>
        <script src="js/app-seasons.js"></script>
        <title>SPT Leaderboard</title>
    </head>

    <body>
        <div class="snowflake"></div>
        <div class="loader-container-pre" id="loader">
            <div class="logo-pre">SPTLB</div>
            <span class="loader-pre"></span>
            <div class="progress-container-pre">
                <div class="progress-bar-pre" id="progress-bar"></div>
            </div>
            <div class="status-text-pre" id="status-text">Initializing...</div>
            <div class="resource-list-container-pre">
                <div class="resource-list-header-pre">
                    <span>Loading Resources</span>
                    <span class="resource-count-pre" id="resource-count">0/16</span>
                </div>
                <div class="resource-list-pre" id="resource-list">
                    <!-- Resources will be added here -->
                </div>
            </div>
            <div class="error-container-pre" id="error-container">
                <div class="error-title-pre">Connection Error</div>
                <div class="error-message-pre" id="error-message"> Please check your internet connection and try again. </div>
                <button class="retry-button-pre" id="retry-button">Retry</button>
            </div>
        </div>
        <header>
            <nav class="navbar" role="navigation">
                <a href="#" aria-label="Home">
                    <img src="media/newlogo_transparent.png" alt="SPT Leaderboard Logo" class="navbar-logo">
                </a>
                <div class="navbar-links-container">
                    <button id="infoButton" class="navbar-link">How it works</button>
                    <button id="settingsButton" class="navbar-link">Settings</button>
                </div>
                <div class="season-selector">
                    <label for="seasonSelect" class="visually-hidden">Season:</label>
                    <select id="seasonSelect" aria-label="Select season"></select>
                </div>
                <div class="snow-corners-transparent"></div>
            </nav>
        </header>
        <h1 style="margin-top: 180px;" class="animate__animated animate__fadeInDown">SPT Leaderboard Mini</h1>
        <div id="infoModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Ranking System Explained</h2>
                <p>The leaderboard uses a weighted scoring system to calculate player performance (later on as Skill Score) across multiple metrics.</p>
                <h3>1. Leaderboard Terminology</h3>
                <ul>
                    <li><strong>KDR:</strong> Kill-to-Death Ratio (PMC Kills ÷ Deaths)</li>
                    <li><strong>SR:</strong> Survival Rate</li>
                    <li><strong>Standing:</strong> Profile standing. Depends on various suspicious detection from the server, or low trust factor.</li>
                </ul>
                <h3>2. Season System</h3>
                <p>Competitive cycles with unique leaderboard:</p>
                <ul>
                    <li><strong>Duration:</strong> 1-3 months per season</li>
                    <li><strong>Reset:</strong> New season automatically starts when SPT major version releases or SPT Leaderboard mod. Moderation of SPTLB Team reserves a right to change its duration at any time.</li>
                    <li><strong>Hall of Fame:</strong> Top 3 players from previous season are shown on the page</li>
                    <li><strong>Data:</strong> Full season archives in the dropdown menu</li>
                </ul>
                <h3>3. Skill Formula</h3>
                <p>Final skill score is calculated using these weighted factors:</p>
                <ul>
                    <li><strong>KDR</strong></li>
                    <li><strong>Survival Rate</strong></li>
                    <li><strong>Average Life Time</strong></li>
                    <li><strong>PMC Raids</strong></li>
                    <li><strong>Leaderboard also includes calibration:</strong>
                        <ul>
                            <li>Minimum 100 PMC raids required for proper skill score ranking</li>
                            <li>70% skill score penalty until player reaches 50 raids</li>
                            <li>Penalty will be applied if player has very low Life Time</li>
                            <li>Initial raid penalty will decrease linearly until player reaches 100 raids</li>
                        </ul>
                    </li>
                </ul>
                <h3>4. Skill Tiers</h3>
                <p>Players are classified into tiers based on final skill score:</p>
                <ul>
                    <li><strong>L- to L+:</strong> Low (0.2-0.55)</li>
                    <li><strong>M- to M+:</strong> Medium (0.55-0.78)</li>
                    <li><strong>H- to H+:</strong> High (0.78-0.94)</li>
                    <li><strong>P- to P+:</strong> Pro (0.94-99)</li>
                    <li><strong>G:</strong> Godlike (1)</li>
                </ul>
                <h3>5. Visual Indicators</h3>
                <p>Statistics, including SPT versions are color-coded based on thresholds:</p>
                <ul>
                    <li><strong>KDR:</strong>
                        <span class="bad">Poor</span> (<5), <span class="average">Standard</span> (5-12), <span class="good">Skilled</span> (12-14.99), <span class="impressive">Impressive</span> (15+)
                    </li>
                    <li><strong>SR:</strong>
                        <span class="bad">Low</span> (<30%), <span class="average">Average</span> (30-55%), <span class="good">Good</span> (55%-70%), <span class="impressive">Impressive</span> (70%+)
                    </li>
                    <li><strong>Raid Duration:</strong>
                        <span class="bad">Short</span> (<5m), <span class="average">Average</span> (5-15m), <span class="good">Long</span> (15-20m), <span class="impressive">Impressive</span> (20m+)
                    </li>
                    <li><strong>SPT Version:</strong>
                        <span class="bad">Outdated</span>, <span class="average">Older than latest release</span>, <span class="good">Latest Release</span>
                    </li>
                </ul>
            </div>
        </div>
        <div id="settingsModal" class="modal" role="dialog" aria-labelledby="settingsTitle">
            <div class="modal-content">
                <span class="close" aria-label="Close">&times;</span>
                <h2 id="settingsTitle">Settings</h2>
                <div class="settings-list">
                    <div class="setting-item">
                        <label class="setting-label">
                            <input type="checkbox" id="lbToggle"> Compact Leaderboard Display </label>
                        <p class="setting-description">Will display leaderboard without PFPs, styles, and other elements. Might increase performance.</p>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">
                            <input type="checkbox" id="timerToggle"> Show Season Countdown Timer </label>
                        <p class="setting-description">Display or hide the time left until new season on the page.</p>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">
                            <input type="checkbox" id="staffToggle" checked="checked"> Show Staff Online </label>
                        <p class="setting-description">Display or hide current Staff activity on the page.</p>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">
                            <input type="checkbox" id="casualToggle"> Hide Casual Players </label>
                        <p class="setting-description">Display or hide casual players on the leaderboard.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="top-stats-bar">
            <div class="live-data-label" id="serverStatus">Getting API Status...</div>
            <div class="stats-line">
                <div class="stats-item"><strong>Kills:</strong> <span id="totalKills" class="odometer">0</span></div>
                <div class="stats-item"><strong>Deaths:</strong> <span id="totalDeaths" class="odometer">0</span></div>
                <div class="stats-item"><strong>Raids:</strong> <span id="totalRaids" class="odometer">0</span></div>
                <div class="stats-item"><strong>Damage:</strong> <span id="totalDamage" class="odometer">0</span></div>
                <div class="stats-item"><strong>K/D:</strong> <span id="averageKDR" class="odometer">0.00</span></div>
                <div class="stats-item"><strong>Survival Rate:</strong> <span id="averageSurvival" class="odometer">0</span>%</div>
                <div class="stats-item"><strong>In Raid:</strong> <span id="totalPlayTime" class="odometer">0</span>minutes</div>
            </div>
            <div class="player-stats">
                <div class="stats-item player-count"><strong>Season Players:</strong> <span id="totalPlayers" class="odometer">0</span></div>
                <div class="stats-item online-count"><strong>Online:</strong> <span id="onlinePlayers" class="odometer">0</span></div>
            </div>
        </div>
        <!--
        <div class="announcement-wrapper animate animate__animated animate__fadeIn">
            <div class="snow-crust"></div>
            <div class="announcement-icon"><img src="https://img.icons8.com/?size=256&id=61604&format=png" style="height: 70px;"></div>
            <div class="announcement-content">
                <div class="announcement-title"> Tarkov Market was refreshed! </div>
                <div class="announcement-text"> We added new high-end gear and ammo packs, also reduced common item drops in some cases! Get items at <a href="https://sptlb.yuyui.moe/api/network/tarkov-market/" class="announcement-link">SPTLB Tarkov Market!</a> Don't forget, you can always <a href="https://discord.gg/psV2PY8brW" target="_blank" class="announcement-link">Join Discord Server</a> to always stay updated! </div>
                <div class="announcement-signature"> — SPTLB Team </div>
            </div>
        </div>
        -->
        <div class="leaderboard-controls">
            <div class="search-container">
                <div class="search-type-toggle">
                    <button class="search-type-btn active" data-type="name">By Name</button>
                    <button class="search-type-btn" data-type="id">By ID</button>
                </div>
                <input type="text" id="playerSearch" placeholder="Find player by name..." />
                <button id="clearSearch">Clear</button>
            </div>
            <div class="controls-toolset">
                <div class="auto-update-control">
                    <label>
                        <input type="checkbox" id="autoUpdateToggle" checked /> Live Data Flow </label>
                    <span id="timeToUpdate"></span>
                </div>
            </div>
        </div>
        <table id="leaderboardTable" class="animate animate__animated animate__fadeIn">
            <thead>
                <tr>
                    <th data-sort="rank">Rank</th>
                    <th>Team</th>
                    <th data-sort="name">Name</th>
                    <th data-sort="lastPlayed">Last Seen</th>
                    <th>Profile</th>
                    <th>Standing</th>
                    <th data-sort="totalRaids">PMC/SCAV Raids</th>
                    <th data-sort="survivedToDiedRatio">SR</th>
                    <th data-sort="killToDeathRatio">KDR</th>
                    <th data-sort="averageLifeTime">Life Time</th>
                    <th data-sort="totalScore">Skill</th>
                    <th>SPT</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <div id="seasonTimer"> Season ends in: <span id="timerDisplay"></span>
        </div>
        <div class="notification-container">
            <div id="emptyLeaderboardNotification" class="animate animate__animated animate__fadeInUp" style="display: none;">Something went wrong while we were loading leaderboard. Try reloading page.</div>
        </div>
        <div id="playerProfileModal" class="profile-modal">
            <div id="modalPlayerInfo" class="profile-modal-content">
                <!-- JS Profile -->
            </div>
        </div>
        <footer class="modern-footer">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="logo-slogan">
                        <img src="media/newlogo_transparent.png" class="footer-logo">
                        <p class="slogan">Community driven project. With dedication and love.</p>
                    </div>
                    <div class="license-info">
                        <p>© 2025 SPT Leaderboard. This service is not maintained by or associated with the SPT project or Battlestate Games.</p>
                        <p>Released under <a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener">MIT License</a></p>
                    </div>
                </div>
            </div>
        </footer>
        <script src="https://github.hubspot.com/odometer/odometer.js"></script>
    </body>

</html>